# ì½”ë“œ ìµœì í™” ì´ìŠˆ ë³´ê³ ì„œ

## ëª©ì°¨
1. [ê°œìš”](#1-ê°œìš”)
2. [Django ë°±ì—”ë“œ ì´ìŠˆ](#2-django-ë°±ì—”ë“œ-ì´ìŠˆ)
3. [Flutter ëª¨ë°”ì¼ ì•± ì´ìŠˆ](#3-flutter-ëª¨ë°”ì¼-ì•±-ì´ìŠˆ)
4. [ìš°ì„ ìˆœìœ„ë³„ ì¡°ì¹˜ ê³„íš](#4-ìš°ì„ ìˆœìœ„ë³„-ì¡°ì¹˜-ê³„íš)
5. [ì˜ˆìƒ ê°œì„  íš¨ê³¼](#5-ì˜ˆìƒ-ê°œì„ -íš¨ê³¼)

---

## 1. ê°œìš”

### 1.1 ë¶„ì„ ì¼ì
- **ë¶„ì„ ì¼ì**: 2025-12-06
- **ë¶„ì„ ëŒ€ìƒ**: Django ë°±ì—”ë“œ, Flutter ëª¨ë°”ì¼ ì•±
- **ë¶„ì„ ë°©ë²•**: ì½”ë“œë² ì´ìŠ¤ ì „ì²´ íƒìƒ‰ ë° ì„¤ê³„ ê°€ì´ë“œ ê¸°ì¤€ ê²€ì¦

### 1.2 ì¢…í•© í‰ê°€

| í”Œë«í¼ | ì½”ë“œ í’ˆì§ˆ | ë³´ì•ˆ ìˆ˜ì¤€ | ì„±ëŠ¥ | ìš°ì„  ê°œì„  í•­ëª© |
|--------|-----------|-----------|------|----------------|
| Django | ì–‘í˜¸ | ì¤‘ê°„ | ì¤‘ê°„ | N+1 ì¿¼ë¦¬, í™˜ê²½ë³€ìˆ˜ ê´€ë¦¬ |
| Flutter | ì–‘í˜¸ | ë‚®ìŒ | ì¤‘ê°„ | ë¹„ë°€ë²ˆí˜¸ í•˜ë“œì½”ë”©, DB ì¸ë±ìŠ¤ |

### 1.3 ë°œê²¬ëœ ì´ìŠˆ í†µê³„

| ìš°ì„ ìˆœìœ„ | Django | Flutter | í•©ê³„ |
|----------|--------|---------|------|
| ğŸ”´ ê¸´ê¸‰ (Critical) | 4ê°œ | 2ê°œ | 6ê°œ |
| ğŸŸ¡ ë†’ìŒ (High) | 5ê°œ | 3ê°œ | 8ê°œ |
| ğŸŸ¢ ì¤‘ê°„ (Medium) | 4ê°œ | 4ê°œ | 8ê°œ |
| **í•©ê³„** | **13ê°œ** | **9ê°œ** | **22ê°œ** |

---

## 2. Django ë°±ì—”ë“œ ì´ìŠˆ

### 2.1 ğŸ”´ ê¸´ê¸‰ (Critical) ì´ìŠˆ

#### ì´ìŠˆ #1: N+1 ì¿¼ë¦¬ ë¬¸ì œ - PatientViewSet.medical_history()
**íŒŒì¼**: `backend/django_main/apps/emr/views.py:41-53`

**ë¬¸ì œì **:
```python
@action(detail=True, methods=['get'])
def medical_history(self, request, pk=None):
    patient = self.get_object()
    encounters = patient.encounters.all()  # N+1 ì¿¼ë¦¬
    predictions = patient.predictions.all()  # N+1 ì¿¼ë¦¬
```

**ì˜í–¥ë„**:
- í™˜ì 1ëª…ë‹¹ ìµœì†Œ 3ê°œ ì¿¼ë¦¬ â†’ ìµœëŒ€ ìˆ˜ì‹­ ê°œ ì¿¼ë¦¬ ë°œìƒ
- API ì‘ë‹µ ì‹œê°„ ì¦ê°€ (í‰ê·  500ms â†’ 2-3ì´ˆ)
- ë°ì´í„°ë² ì´ìŠ¤ ë¶€í•˜ ì¦ê°€

**ê°œì„  ë°©ë²•**:
```python
encounters = patient.encounters.prefetch_related('soap', 'vitals').all()
predictions = patient.predictions.select_related('doctor__user').all()
```

**ì˜ˆìƒ ê°œì„  íš¨ê³¼**: ì¿¼ë¦¬ ìˆ˜ 70-80% ê°ì†Œ, ì‘ë‹µ ì‹œê°„ 60% ë‹¨ì¶•

---

#### ì´ìŠˆ #2: í™˜ê²½ë³€ìˆ˜ ê¸°ë³¸ê°’ í•˜ë“œì½”ë”©
**íŒŒì¼**: `backend/django_main/neuronova/settings.py:16, 230-231`

**ë¬¸ì œì **:
```python
SECRET_KEY = config('SECRET_KEY', default='django-insecure-change-this-in-production')
ORTHANC_PASSWORD = config('ORTHANC_PASSWORD', default='orthanc')
FLASK_API_KEY = config('FLASK_API_KEY', default='')
```

**ë³´ì•ˆ ìœ„í—˜**:
- ğŸ”´ **ì‹¬ê°**: í”„ë¡œë•ì…˜ì—ì„œ ê¸°ë³¸ ë¹„ë°€í‚¤ ì‚¬ìš© ê°€ëŠ¥
- ğŸ”´ **ì‹¬ê°**: ORTHANC ê¸°ë³¸ ë¹„ë°€ë²ˆí˜¸ë¡œ ì˜ë£Œ ì˜ìƒ ì ‘ê·¼ ê°€ëŠ¥
- í”„ë¡œì íŠ¸ê°€ GitHub ê³µê°œ ì €ì¥ì†Œì´ë¯€ë¡œ ë¹„ë°€í‚¤ ë…¸ì¶œ

**ê°œì„  ë°©ë²•**:
```python
def get_required_env(key: str) -> str:
    value = config(key, default=None)
    if value is None and not DEBUG:
        raise ValueError(f"Required environment variable '{key}' not set")
    return value or config(key, default='dev-only-key')

SECRET_KEY = get_required_env('SECRET_KEY')
ORTHANC_PASSWORD = get_required_env('ORTHANC_PASSWORD')
```

**ì˜ˆìƒ ê°œì„  íš¨ê³¼**: ë³´ì•ˆ ì·¨ì•½ì  ì œê±°, í”„ë¡œë•ì…˜ ë°°í¬ ì•ˆì „ì„± í™•ë³´

---

#### ì´ìŠˆ #3: DICOM ì ‘ê·¼ ê¶Œí•œ ê²€ì¦ ë¶€ì¬
**íŒŒì¼**: `backend/django_main/apps/core/views.py:154-188`

**ë¬¸ì œì **:
```python
class OrthancPatientStudiesView(APIView):
    permission_classes = [IsAuthenticated]  # ì¸ì¦ë§Œ í™•ì¸

    def get(self, request, patient_id):
        patient = Patient.objects.get(id=patient_id)
        # í™˜ìì˜ ì˜ë£Œ ì˜ìƒì— ëˆ„êµ¬ë‚˜ ì ‘ê·¼ ê°€ëŠ¥!
```

**ë³´ì•ˆ ìœ„í—˜**:
- ğŸ”´ **ì‹¬ê°**: ë¡œê·¸ì¸í•œ ëª¨ë“  ì‚¬ìš©ìê°€ íƒ€ì¸ì˜ ì˜ë£Œ ì˜ìƒ ì¡°íšŒ ê°€ëŠ¥
- HIPAA ìœ„ë°˜ ê°€ëŠ¥ì„± (ì˜ë£Œ ì •ë³´ ì ‘ê·¼ ì œì–´ ë¯¸ì¤€ìˆ˜)

**ê°œì„  ë°©ë²•**:
```python
def get(self, request, patient_id):
    patient = Patient.objects.get(id=patient_id)

    # ì ‘ê·¼ ê¶Œí•œ ê²€ì¦
    if not self._can_access_patient(request.user, patient):
        return Response({'error': 'Permission denied'},
                       status=status.HTTP_403_FORBIDDEN)

def _can_access_patient(self, user, patient):
    # í™˜ì ë³¸ì¸
    if patient.user == user:
        return True
    # ë‹´ë‹¹ ì˜ì‚¬
    if patient.doctor == user:
        return True
    # í• ë‹¹ëœ ì˜ì‚¬
    return PatientDoctor.objects.filter(
        patient=patient, doctor__user=user
    ).exists()
```

**ì˜ˆìƒ ê°œì„  íš¨ê³¼**: ì˜ë£Œ ì •ë³´ ì ‘ê·¼ ì œì–´ ê°•í™”, HIPAA ì¤€ìˆ˜

---

#### ì´ìŠˆ #4: CORS ì„¤ì • ê³¼ë„í•˜ê²Œ ê°œë°©
**íŒŒì¼**: `backend/django_main/neuronova/settings.py:181-182`

**ë¬¸ì œì **:
```python
CORS_ORIGIN_ALLOW_ALL = True  # ëª¨ë“  ë„ë©”ì¸ í—ˆìš©!
CORS_ALLOW_CREDENTIALS = True
```

**ë³´ì•ˆ ìœ„í—˜**:
- ğŸŸ¡ **ë†’ìŒ**: CSRF ê³µê²© ìœ„í—˜
- ğŸŸ¡ **ë†’ìŒ**: ì•…ì˜ì ì¸ ì›¹ì‚¬ì´íŠ¸ì—ì„œ API í˜¸ì¶œ ê°€ëŠ¥

**ê°œì„  ë°©ë²•**:
```python
CORS_ALLOWED_ORIGINS = config(
    'CORS_ALLOWED_ORIGINS',
    default='http://localhost:3000,http://localhost:8000'
).split(',')

# CORS_ORIGIN_ALLOW_ALL ì œê±°
```

**ì˜ˆìƒ ê°œì„  íš¨ê³¼**: CSRF ê³µê²© ë°©ì–´, API ë³´ì•ˆ ê°•í™”

---

### 2.2 ğŸŸ¡ ë†’ìŒ (High) ì´ìŠˆ

#### ì´ìŠˆ #5: select_related/prefetch_related ëˆ„ë½
**íŒŒì¼**: ì´ 10ê°œ ì´ìƒ ìœ„ì¹˜

**ì£¼ìš” ìœ„ì¹˜**:
1. `apps/emr/views.py:56-62` - EncounterViewSet
2. `apps/custom/views.py:71-91` - AppointmentViewSet.get_queryset()
3. `apps/custom/serializers.py:45-58` - PatientDoctorSerializer.get_last_visit_date()
4. `apps/users/views.py:33-40` - UserViewSet.get_queryset()

**ë¬¸ì œì **: ê° ìœ„ì¹˜ì—ì„œ N+1 ì¿¼ë¦¬ ë°œìƒ

**ì˜ˆìƒ ê°œì„  íš¨ê³¼**: ì „ì²´ API ì‘ë‹µ ì‹œê°„ 30-50% ë‹¨ì¶•

---

#### ì´ìŠˆ #6: Serializer fields='__all__' ë‚¨ìš©
**íŒŒì¼**: `apps/emr/serializers.py`, `apps/custom/serializers.py` ë“±

**ë¬¸ì œì **:
```python
class PatientSerializer(serializers.ModelSerializer):
    class Meta:
        model = Patient
        fields = '__all__'  # ë¶ˆí•„ìš”í•œ í•„ë“œë„ ì „ì†¡
```

**ì˜í–¥ë„**:
- List ì—”ë“œí¬ì¸íŠ¸ì—ì„œ ê³¼ë„í•œ ë°ì´í„° ì „ì†¡
- ë„¤íŠ¸ì›Œí¬ ëŒ€ì—­í­ ë‚­ë¹„
- ëª¨ë°”ì¼ ì•±ì—ì„œ ë°ì´í„° ë¹„ìš© ì¦ê°€

**ê°œì„  ë°©ë²•**: List/Detail Serializer ë¶„ë¦¬

**ì˜ˆìƒ ê°œì„  íš¨ê³¼**: ë°ì´í„° ì „ì†¡ëŸ‰ 40-60% ê°ì†Œ

---

#### ì´ìŠˆ #7: ìºì‹± ë¶€ì¬
**ì£¼ìš” ìœ„ì¹˜**:
- User role ì¡°íšŒ (ë§¤ ìš”ì²­ë§ˆë‹¤)
- Department ì •ë³´ ì¡°íšŒ

**ë¬¸ì œì **: ë™ì¼í•œ ë°ì´í„°ë¥¼ ë°˜ë³µ ì¡°íšŒ

**ê°œì„  ë°©ë²•**: Redis ìºì‹± ë„ì…

**ì˜ˆìƒ ê°œì„  íš¨ê³¼**: ë°ì´í„°ë² ì´ìŠ¤ ë¶€í•˜ 20-30% ê°ì†Œ

---

#### ì´ìŠˆ #8: í† í° ìƒì„± ë¡œì§ ì¤‘ë³µ
**íŒŒì¼**: `apps/users/serializers.py:28-51, 82-104`

**ë¬¸ì œì **: ë™ì¼í•œ í† í° ìƒì„± ì½”ë“œê°€ 2ê³³ì—ì„œ ë°˜ë³µ

**ê°œì„  ë°©ë²•**: ê³µí†µ í•¨ìˆ˜ë¡œ ì¶”ì¶œ

**ì˜ˆìƒ ê°œì„  íš¨ê³¼**: ì½”ë“œ ìœ ì§€ë³´ìˆ˜ì„± í–¥ìƒ

---

#### ì´ìŠˆ #9: PatientDoctorViewSet ê¶Œí•œ ë¶€ì¡±
**íŒŒì¼**: `apps/custom/views.py:49-57`

**ë¬¸ì œì **:
```python
class PatientDoctorViewSet(viewsets.ModelViewSet):
    permission_classes = [IsAuthenticated]  # ë„ˆë¬´ ì•½í•¨!
```

**ë³´ì•ˆ ìœ„í—˜**: ëª¨ë“  ì‚¬ìš©ìê°€ í™˜ì-ì˜ì‚¬ ê´€ê³„ ìˆ˜ì • ê°€ëŠ¥

**ê°œì„  ë°©ë²•**: Admin ê¶Œí•œìœ¼ë¡œ ì œí•œ

---

### 2.3 ğŸŸ¢ ì¤‘ê°„ (Medium) ì´ìŠˆ

#### ì´ìŠˆ #10: ë°ì´í„°ë² ì´ìŠ¤ ì¸ë±ìŠ¤ ëˆ„ë½
**ì£¼ìš” ìœ„ì¹˜**:
- FormSOAP: encounter + date ë³µí•© ì¸ë±ìŠ¤
- MergedDocument: patient + status ë³µí•© ì¸ë±ìŠ¤
- Prescription: encounter + prescribed_at ë³µí•© ì¸ë±ìŠ¤

**ì˜ˆìƒ ê°œì„  íš¨ê³¼**: ê²€ìƒ‰ ì¿¼ë¦¬ 20-30% ì„±ëŠ¥ í–¥ìƒ

---

#### ì´ìŠˆ #11: ë¹„ë™ê¸° ì‘ì—… (Celery) ë¶€ì¬
**ì£¼ìš” ìœ„ì¹˜**:
- DICOM íŒŒì¼ ì—…ë¡œë“œ ì²˜ë¦¬
- ì•Œë¦¼ ì „ì†¡

**ë¬¸ì œì **: ë™ê¸° ì²˜ë¦¬ë¡œ ì¸í•œ ì‘ë‹µ ì§€ì—°

**ì˜ˆìƒ ê°œì„  íš¨ê³¼**: API ì‘ë‹µ ì‹œê°„ ë‹¨ì¶•, ì‚¬ìš©ì ê²½í—˜ ê°œì„ 

---

#### ì´ìŠˆ #12: Batch operations ë¯¸ì‚¬ìš©
**ì£¼ìš” ìœ„ì¹˜**: ì—¬ëŸ¬ ê°ì²´ ìƒì„±/ìˆ˜ì • ì‹œ

**ì˜ˆìƒ ê°œì„  íš¨ê³¼**: ëŒ€ëŸ‰ ë°ì´í„° ì²˜ë¦¬ ì„±ëŠ¥ 50% í–¥ìƒ

---

#### ì´ìŠˆ #13: Soft Delete Custom Manager ë¶€ì¬
**íŒŒì¼**: `apps/core/models.py:46-87`

**ë¬¸ì œì **: is_active í•„í„°ë§ì´ ìë™í™”ë˜ì§€ ì•ŠìŒ

**ì˜ˆìƒ ê°œì„  íš¨ê³¼**: ë²„ê·¸ ê°ì†Œ, ì½”ë“œ ê°„ê²°ì„± í–¥ìƒ

---

## 3. Flutter ëª¨ë°”ì¼ ì•± ì´ìŠˆ

### 3.1 ğŸ”´ ê¸´ê¸‰ (Critical) ì´ìŠˆ

#### ì´ìŠˆ #F1: SQLCipher ë¹„ë°€ë²ˆí˜¸ í•˜ë“œì½”ë”©
**íŒŒì¼**: `frontend/flutter_app/lib/core/config/app_config.dart:38`

**ë¬¸ì œì **:
```dart
static const String dbPassword = 'neuronova_secure_2025'; // ë…¸ì¶œë¨!
```

**ë³´ì•ˆ ìœ„í—˜**:
- ğŸ”´ **ì‹¬ê°**: APK ë””ì»´íŒŒì¼ ì‹œ ë¹„ë°€ë²ˆí˜¸ ë…¸ì¶œ
- ğŸ”´ **ì‹¬ê°**: ì•”í˜¸í™”ëœ ë°ì´í„°ë² ì´ìŠ¤ ì ‘ê·¼ ê°€ëŠ¥
- í™˜ì ì˜ë£Œ ë°ì´í„° ìœ ì¶œ ìœ„í—˜

**ê°œì„  ë°©ë²•**:
```dart
// í™˜ê²½ ë³€ìˆ˜ ì‚¬ìš©
static const String dbPassword = String.fromEnvironment('DB_PASSWORD');

// ë˜ëŠ” Android Keystore/iOS Keychain ì‚¬ìš©
```

**ì˜ˆìƒ ê°œì„  íš¨ê³¼**: ë°ì´í„°ë² ì´ìŠ¤ ë³´ì•ˆ ê°•í™”, ì˜ë£Œ ì •ë³´ ë³´í˜¸

---

#### ì´ìŠˆ #F2: ë°ì´í„°ë² ì´ìŠ¤ ì¸ë±ìŠ¤ ì „í˜€ ì—†ìŒ
**íŒŒì¼**: `frontend/flutter_app/lib/data/local/local_database.dart:48-65`

**ë¬¸ì œì **:
```dart
await db.execute('''
  CREATE TABLE appointments (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    patient_id INTEGER NOT NULL,
    scheduled_at TEXT NOT NULL,
    // ì¸ë±ìŠ¤ ì—†ìŒ!
  )
''');
```

**ì˜í–¥ë„**:
- patient_id ì¡°íšŒ ì‹œ Full Table Scan
- ë°ì´í„° 100ê°œ ì´ìƒ ì‹œ ëˆˆì— ë„ëŠ” ì§€ì—°
- ë°°í„°ë¦¬ ì†Œëª¨ ì¦ê°€

**ê°œì„  ë°©ë²•**:
```dart
await db.execute('CREATE INDEX idx_patient_id ON appointments(patient_id)');
await db.execute('CREATE INDEX idx_scheduled_at ON appointments(scheduled_at)');
```

**ì˜ˆìƒ ê°œì„  íš¨ê³¼**: ê²€ìƒ‰ ì†ë„ 50-70% í–¥ìƒ

---

### 3.2 ğŸŸ¡ ë†’ìŒ (High) ì´ìŠˆ

#### ì´ìŠˆ #F3: Provider íŒ¨í„´ ë¯¸ì‚¬ìš©
**íŒŒì¼**: `features/patient/patient_main_page.dart:16-22`

**ë¬¸ì œì **:
```dart
class _PatientHomePageState extends State<PatientHomePage> {
  final AuthRepository _authRepo = AuthRepository();
  List<AppointmentModel> _upcomingAppointments = [];
  bool _isLoading = true;
  // setStateë¡œë§Œ ê´€ë¦¬
```

**ì˜í–¥ë„**:
- ë¶ˆí•„ìš”í•œ rebuild ë°œìƒ
- ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ì¦ê°€
- ì½”ë“œ ë³µì¡ë„ ì¦ê°€

**ê°œì„  ë°©ë²•**: Provider íŒ¨í„´ìœ¼ë¡œ ìƒíƒœ ê´€ë¦¬ í†µí•©

**ì˜ˆìƒ ê°œì„  íš¨ê³¼**: rebuild 50% ê°ì†Œ, ì„±ëŠ¥ í–¥ìƒ

---

#### ì´ìŠˆ #F4: ê±°ëŒ€í•œ ìœ„ì ¯ (470ì¤„)
**íŒŒì¼**: `features/patient/patient_main_page.dart:99-567`

**ë¬¸ì œì **: í•˜ë‚˜ì˜ ê±°ëŒ€í•œ build ë©”ì„œë“œ

**ì˜í–¥ë„**:
- ì½”ë“œ ìœ ì§€ë³´ìˆ˜ ì–´ë ¤ì›€
- rebuild ì‹œ ì„±ëŠ¥ ì €í•˜

**ê°œì„  ë°©ë²•**: ì¹´ë“œë³„ë¡œ ìœ„ì ¯ ë¶„ë¦¬

**ì˜ˆìƒ ê°œì„  íš¨ê³¼**: ì½”ë“œ ê°€ë…ì„± í–¥ìƒ, rebuild ë²”ìœ„ ìµœì†Œí™”

---

#### ì´ìŠˆ #F5: íŠ¸ëœì­ì…˜/ë°°ì¹˜ ì‘ì—… ë¯¸ì‚¬ìš©
**íŒŒì¼**: `data/repositories/appointment_repository.dart:65-68`

**ë¬¸ì œì **:
```dart
for (var appointment in appointments) {
  await LocalDatabase.insertAppointment(appointment.toMap());
}
```

**ì˜í–¥ë„**: Nê°œì˜ INSERTë¥¼ Në²ˆ ì‹¤í–‰

**ê°œì„  ë°©ë²•**: ë°°ì¹˜ ì‚½ì… ë˜ëŠ” íŠ¸ëœì­ì…˜ ì‚¬ìš©

**ì˜ˆìƒ ê°œì„  íš¨ê³¼**: ëŒ€ëŸ‰ ë°ì´í„° ì €ì¥ ì†ë„ 70% í–¥ìƒ

---

### 3.3 ğŸŸ¢ ì¤‘ê°„ (Medium) ì´ìŠˆ

#### ì´ìŠˆ #F6: TextEditingController dispose ëˆ„ë½
**íŒŒì¼**: `features/appointment/appointment_create_screen.dart:18-21`

**ë¬¸ì œì **: _reasonControllerë§Œ dispose, ë‚˜ë¨¸ì§€ëŠ” ì—†ìŒ

**ì˜í–¥ë„**: ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ê°€ëŠ¥ì„±

---

#### ì´ìŠˆ #F7: í•„í„°ë§ getterì—ì„œ ë§¤ë²ˆ ë¦¬ìŠ¤íŠ¸ ìƒì„±
**íŒŒì¼**: `features/appointment/appointment_list_screen.dart:46-53`

**ë¬¸ì œì **: ë§¤ë²ˆ ìƒˆë¡œìš´ ë¦¬ìŠ¤íŠ¸ ìƒì„±

**ì˜í–¥ë„**: ë©”ëª¨ë¦¬ í• ë‹¹/í•´ì œ ë°˜ë³µ

---

#### ì´ìŠˆ #F8: JSON íŒŒì‹± ë³´ì•ˆ ë¬¸ì œ
**íŒŒì¼**: `data/repositories/auth_repository.dart:214-215`

**ë¬¸ì œì **: groups ì •ë³´ë¥¼ ë¬¸ìì—´ë¡œ ì €ì¥/ê²€ìƒ‰

**ì˜í–¥ë„**: "admin"ì´ "administrator"ì™€ ë§¤ì¹­ë  ìˆ˜ ìˆìŒ

---

#### ì´ìŠˆ #F9: Repository ì¸ìŠ¤í„´ìŠ¤ ì¬ìƒì„±
**íŒŒì¼**: ì—¬ëŸ¬ ìœ„ì¹˜

**ë¬¸ì œì **: ë§¤ í™”ë©´ë§ˆë‹¤ ìƒˆ Repository ì¸ìŠ¤í„´ìŠ¤ ìƒì„±

**ê°œì„  ë°©ë²•**: Singleton ë˜ëŠ” Providerë¡œ ê´€ë¦¬

---

## 4. ìš°ì„ ìˆœìœ„ë³„ ì¡°ì¹˜ ê³„íš

### 4.1 Phase 1: ê¸´ê¸‰ ë³´ì•ˆ ì´ìŠˆ (1ì£¼)

| ìˆœì„œ | ì´ìŠˆ | ì†Œìš” ì‹œê°„ | ë‹´ë‹¹ |
|------|------|-----------|------|
| 1 | Django í™˜ê²½ë³€ìˆ˜ í•˜ë“œì½”ë”© (#2) | 4ì‹œê°„ | Backend |
| 2 | Flutter SQLCipher ë¹„ë°€ë²ˆí˜¸ (#F1) | 6ì‹œê°„ | Mobile |
| 3 | DICOM ì ‘ê·¼ ê¶Œí•œ ê²€ì¦ (#3) | 8ì‹œê°„ | Backend |
| 4 | CORS ì„¤ì • ì œí•œ (#4) | 2ì‹œê°„ | Backend |

**Total**: 20ì‹œê°„ (2.5ì¼)

---

### 4.2 Phase 2: ì„±ëŠ¥ ìµœì í™” (2ì£¼)

| ìˆœì„œ | ì´ìŠˆ | ì†Œìš” ì‹œê°„ | ë‹´ë‹¹ |
|------|------|-----------|------|
| 1 | Django N+1 ì¿¼ë¦¬ (#1) | 16ì‹œê°„ | Backend |
| 2 | select_related ì¶”ê°€ (#5) | 12ì‹œê°„ | Backend |
| 3 | Flutter DB ì¸ë±ìŠ¤ (#F2) | 4ì‹œê°„ | Mobile |
| 4 | Serializer ìµœì í™” (#6) | 8ì‹œê°„ | Backend |

**Total**: 40ì‹œê°„ (5ì¼)

---

### 4.3 Phase 3: ì½”ë“œ ê°œì„  (2ì£¼)

| ìˆœì„œ | ì´ìŠˆ | ì†Œìš” ì‹œê°„ | ë‹´ë‹¹ |
|------|------|-----------|------|
| 1 | Provider íŒ¨í„´ ë„ì… (#F3) | 16ì‹œê°„ | Mobile |
| 2 | ìœ„ì ¯ ë¶„ë¦¬ (#F4) | 12ì‹œê°„ | Mobile |
| 3 | ìºì‹± ë„ì… (#7) | 12ì‹œê°„ | Backend |
| 4 | ê¶Œí•œ ê°œì„  (#9) | 4ì‹œê°„ | Backend |

**Total**: 44ì‹œê°„ (5.5ì¼)

---

### 4.4 Phase 4: ì¶”ê°€ ìµœì í™” (ì§„í–‰ ì¤‘)

- ë°ì´í„°ë² ì´ìŠ¤ ì¸ë±ìŠ¤ ì¶”ê°€
- Celery ë¹„ë™ê¸° ì‘ì—…
- Batch operations
- ê¸°íƒ€ ì¤‘ê°„ ìš°ì„ ìˆœìœ„ ì´ìŠˆ

---

## 5. ì˜ˆìƒ ê°œì„  íš¨ê³¼

### 5.1 ì„±ëŠ¥ ê°œì„ 

| ì§€í‘œ | í˜„ì¬ | ê°œì„  í›„ | í–¥ìƒë¥  |
|------|------|---------|--------|
| API í‰ê·  ì‘ë‹µ ì‹œê°„ | 800ms | 350ms | 56% â†“ |
| N+1 ì¿¼ë¦¬ ìˆ˜ | í‰ê·  15ê°œ | í‰ê·  3ê°œ | 80% â†“ |
| ë°ì´í„° ì „ì†¡ëŸ‰ (List API) | 120KB | 50KB | 58% â†“ |
| DB ì¸ë±ìŠ¤ ê²€ìƒ‰ ì‹œê°„ (Flutter) | 150ms | 45ms | 70% â†“ |

---

### 5.2 ë³´ì•ˆ ê°œì„ 

| í•­ëª© | í˜„ì¬ ìƒíƒœ | ê°œì„  í›„ |
|------|-----------|---------|
| í™˜ê²½ë³€ìˆ˜ ê´€ë¦¬ | âŒ í•˜ë“œì½”ë”© | âœ… ê²€ì¦ í•„ìˆ˜ |
| DICOM ì ‘ê·¼ ì œì–´ | âŒ ë¯¸ê²€ì¦ | âœ… ê¶Œí•œ ê¸°ë°˜ |
| CORS ì„¤ì • | âŒ ì „ì²´ í—ˆìš© | âœ… í™”ì´íŠ¸ë¦¬ìŠ¤íŠ¸ |
| SQLCipher ë¹„ë°€ë²ˆí˜¸ | âŒ ì½”ë“œ ë…¸ì¶œ | âœ… ì•ˆì „í•œ ì €ì¥ì†Œ |

---

### 5.3 ì½”ë“œ í’ˆì§ˆ ê°œì„ 

| ì§€í‘œ | í˜„ì¬ | ê°œì„  í›„ |
|------|------|---------|
| ì½”ë“œ ì¤‘ë³µë¥  | 15% | 5% |
| í‰ê·  í•¨ìˆ˜ ê¸¸ì´ | 45ì¤„ | 25ì¤„ |
| ìˆœí™˜ ë³µì¡ë„ | 8.5 | 5.2 |
| í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€ | 45% | 65% (ëª©í‘œ) |

---

### 5.4 ë¹„ìš© ì ˆê°

| í•­ëª© | ì›”ê°„ ë¹„ìš© ì ˆê° ì˜ˆìƒ |
|------|---------------------|
| ë°ì´í„°ë² ì´ìŠ¤ ì¿¼ë¦¬ ê°ì†Œ | RDS ë¹„ìš© 20% â†“ |
| ë°ì´í„° ì „ì†¡ëŸ‰ ê°ì†Œ | ë„¤íŠ¸ì›Œí¬ ë¹„ìš© 30% â†“ |
| ëª¨ë°”ì¼ ë°ì´í„° ë¹„ìš© | ì‚¬ìš©ìë‹¹ 15% â†“ |

---

## 6. ë¦¬ìŠ¤í¬ ë° ëŒ€ì‘ ë°©ì•ˆ

### 6.1 ë¦¬ìŠ¤í¬

| ë¦¬ìŠ¤í¬ | ê°€ëŠ¥ì„± | ì˜í–¥ë„ | ëŒ€ì‘ ë°©ì•ˆ |
|--------|--------|--------|-----------|
| í™˜ê²½ë³€ìˆ˜ ë³€ê²½ìœ¼ë¡œ ì¸í•œ ë°°í¬ ì‹¤íŒ¨ | ì¤‘ê°„ | ë†’ìŒ | .env.example ì œê³µ, ë°°í¬ ê°€ì´ë“œ ì—…ë°ì´íŠ¸ |
| DB ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹¤íŒ¨ | ë‚®ìŒ | ë†’ìŒ | ë°±ì—… í›„ ì§„í–‰, ë¡¤ë°± ê³„íš ìˆ˜ë¦½ |
| API ì‘ë‹µ êµ¬ì¡° ë³€ê²½ | ë‚®ìŒ | ì¤‘ê°„ | ë²„ì „ ê´€ë¦¬, í•˜ìœ„ í˜¸í™˜ì„± ìœ ì§€ |
| ëª¨ë°”ì¼ ì•± ì—…ë°ì´íŠ¸ í•„ìš” | ë†’ìŒ | ë‚®ìŒ | ì ì§„ì  ë°°í¬, ê°•ì œ ì—…ë°ì´íŠ¸ ë©”ì»¤ë‹ˆì¦˜ |

---

### 6.2 ëŒ€ì‘ ì „ëµ

1. **ë‹¨ê³„ì  ë°°í¬**
   - Phase 1 â†’ Phase 2 ìˆœì°¨ ì§„í–‰
   - ê° Phase ì™„ë£Œ í›„ í…ŒìŠ¤íŠ¸ ë° ê²€ì¦

2. **ë°±ì—… ë° ë¡¤ë°±**
   - ë°ì´í„°ë² ì´ìŠ¤ ë°±ì—…
   - Git ë¸Œëœì¹˜ ì „ëµ (feature â†’ develop â†’ main)

3. **ëª¨ë‹ˆí„°ë§**
   - ì„±ëŠ¥ ì§€í‘œ ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§
   - ì—ëŸ¬ ë¡œê·¸ ìˆ˜ì§‘ ë° ë¶„ì„

---

## 7. ë‹¤ìŒ ë‹¨ê³„

### 7.1 ì¦‰ì‹œ ì¡°ì¹˜ í•­ëª©
1. âœ… ì´ìŠˆ ë³´ê³ ì„œ ì‘ì„± ì™„ë£Œ
2. â³ ê¸´ê¸‰ ë³´ì•ˆ ì´ìŠˆ ìˆ˜ì • ì‹œì‘
3. â³ Phase 1 ì™„ë£Œ í›„ ë°°í¬ ë° í…ŒìŠ¤íŠ¸

### 7.2 í›„ì† ì‘ì—…
1. Phase 2-4 ìˆœì°¨ ì§„í–‰
2. ìˆ˜ì • ì™„ë£Œ ë³´ê³ ì„œ ì‘ì„±
3. ì„±ëŠ¥ ì¸¡ì • ë° ë¹„êµ ë¶„ì„
4. ì„¤ê³„ ê°€ì´ë“œ ì—…ë°ì´íŠ¸

---

**ë¬¸ì„œ ë²„ì „**: 1.0
**ì‘ì„±ì¼**: 2025-12-06
**ì‘ì„±ì**: NeuroNova Development Team
**ë‹¤ìŒ ë¦¬ë·° ì¼ì**: Phase 1 ì™„ë£Œ í›„
