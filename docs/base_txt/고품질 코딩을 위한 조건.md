아래는 네가 요청한 **추가 내용까지 전부 통합한 완전한 `.md` 버전**이다.
그대로 복사하면 바로 Markdown 문서로 사용 가능하다.

---

# **AI 코딩 규칙 (AI Prompt Coding Rules)**

AI는 아래 코딩 규칙을 철저하게 준수하여 코드를 작성한다.

---

## 1. 기본 원칙

* 코드는 의도가 명확해야 한다.
* 함수는 하나의 역할만 수행한다(Single Responsibility).
* 중복된 코드는 작성하지 않는다(DRY).
* 사이드이펙트는 최소화한다.
* 기본적으로 모든 로직은 `try-catch` 구조를 사용하고 `error_message`를 명확히 설정한다.

---

## 2. 네이밍 규칙

* 모든 이름은 의도를 정확히 드러내야 한다.
* 불필요한 줄임말 금지(단, URL·ID 등 관용적 약어는 예외).
* boolean 변수는 `is`, `has`, `can`, `should`로 시작한다.
* 함수 이름은 동사로 시작한다.

---

## 3. 함수 및 메서드 작성 규칙

* 함수는 30줄 이하.
* 파라미터는 최대 3개 이하 유지.
* 비동기 로직은 `async/await` 사용.
* 모든 오류는 반드시 `try-catch`로 처리.
* 디버깅용 console.log는 즉시 제거.
* 입력/출력 데이터 형식은 **MAP(딕셔너리)** 으로 통일한다.

---

## 4. 코드 스타일

* 들여쓰기 스타일을 프로젝트 전체에서 일관되게 유지.
* 불필요한 else, 깊은 중첩 로직 제거.
* 조건문은 조기 return으로 단순화.
* 값 비교는 항상 `===` 사용.
* 매직 넘버 금지 → 상수로 분리.
* `.env` 파일을 사용하여 민감 정보를 코드에서 분리하고 환경별 설정 전환을 쉽게 만든다.

---

## 5. React 규칙

* 모든 컴포넌트는 작고 재사용 가능하게 만든다.
* 상태는 최소화하고 필요할 때만 상위 컴포넌트로 끌어올린다.
* useEffect 남용 금지, 의존성 배열 명확히.
* API 호출 로직은 컴포넌트 내부에 넣지 않고 **service 레이어에서 일괄 관리**한다.
* props는 반드시 타입을 명확히 정의한다(Typescript).
* **RenderFlex Vertical Overflow 방지**
  → `SingleChildScrollView + Column` 조합을 기본 레이아웃 패턴으로 사용한다.

---

## 6. 백엔드(API) 규칙

* API는 RESTful하게 설계한다.
* 엔드포인트는 명사 기반 + 복수형(`/users`, `/posts`).
* 요청 및 응답 형식은 모든 API에서 동일하게 유지.
* 에러 응답은 `{ code, message, detail }` 구조를 사용.
* 오래 걸리는 연산은 `task_id` 기반 비동기 처리 제공.
* API URI는 모두 전역 상수로 관리:

  ```
  static const String Endpoint = '/api/@/';
  ```
* 입력/출력은 MAP 구조로 통일한다.

---

## 7. Django 규칙 및 데코레이터 사용

### 데코레이터 적극 활용

* `@transaction.atomic`
  → 여러 DB 연산을 하나의 트랜잭션으로 묶어 원자성을 보장한다.
* `@action`
  → 기본 CRUD 외의 추가 Endpoint를 정의할 때 사용한다.
* `@receiver`
  → Django Signal 시스템에 함수를 등록할 때 사용한다.

### Django 인증/해싱 관련

* 비밀번호 해싱은 `BCryptSHA256PasswordHasher` 사용한다.
* `swappable_dependency` 활용하여 커스텀 User 모델 변경 시
  migration이 자동으로 올바른 모델을 참조하게 한다.

  * 프로젝트 간 migration 재사용 가능
  * User 모델 구조 변경에도 안전하게 대응 가능

---

## 8. 데이터 처리 / 연구 데이터

* BD에 환자 검사를 저장할 때 **익명화 / 가명화**를 적용하여 연구 데이터셋을 자동 생성한다.
* XAI(설명 가능한 인공지능) 시각화를 통해 임상 의사결정의 효율성·투명성을 극대화한다.

---

## 9. 페이징 처리

* 페이지네이션(Pagination)은 API·UI 모두에서 일관된 구조로 구현한다.
* 페이지 번호, 페이지 크기, 총합, 다음/이전 여부 등을 MAP 구조로 통일.

---

## 10. 폴더 및 파일 구조

* 기능 단위(feature-based) 구조.
* 하나의 파일은 하나의 책임만 가진다.
* 파일명은 케밥케이스 또는 스네이크케이스 사용(언어 규칙 기준).

---

## 11. Git 규칙

* 커밋 메시지 규칙:

  * `feat:` 기능 추가
  * `fix:` 버그 수정
  * `refactor:` 리팩토링
  * `docs:` 문서 작업
  * `chore:` 기타
* 커밋은 가능한 작은 단위로.
* PR은 하나의 목적만 포함하도록 유지.

---

## 12. 테스트 규칙

* 핵심 비즈니스 로직은 반드시 단위 테스트 포함.
* API는 최소 “성공/실패” 케이스 1개씩 작성.

---

