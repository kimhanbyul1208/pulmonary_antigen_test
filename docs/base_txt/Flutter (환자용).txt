# NeuroNova Flutter Patient App (환자용 앱)

## 1. 개요
환자가 자신의 진료 기록을 확인하고, 병원 예약을 관리하며, 처방약을 기록할 수 있는 모바일 애플리케이션입니다.
병원 내 보안 정책을 준수하기 위해 위치 기반(Bluetooth Beacon) 보안 기능을 탑재하고 있습니다.

## 2. 주요 기능

### 2.1 홈 화면 (Patient Home)
- **병원 브랜딩**: NeuroNova 병원 로고 및 슬로건 표시.
- **의료진 정보**: 담당 주치의 및 진료과 정보 표시.
- **빠른 액션**:
  - **진료 예약**: 예약 생성 화면으로 이동.
  - **이전 진료기록**: 최근 진료 내역 확인 및 상세 이동.
  - **처방약 관리**: QR 코드 스캔 또는 수동 입력을 통한 복약 관리.
- **병원 안내**:
  - 진료과 위치 (예: 본관 3층 301호)
  - 대표 전화번호 및 진료 시간 안내.
  - 병원 찾아오기 (지도 연동 예정).

### 2.2 진료 내역 (Medical Records)
- **목록 조회**: 날짜별 MRI 촬영 기록 및 AI 분석 요약 확인.
- **상세 보기 (Record Detail)**:
  - **영상 뷰어 탭**: DICOM 의료 영상 조회 (Zoom, Pan, Contrast 조절).
  - **AI 분석 탭**:
    - 종양 분류 결과 (예: Meningioma, 98.5% 확신도).
    - XAI 시각화 (Grad-CAM Heatmap)를 통한 분석 근거 제공.
  - **보안 다운로드**: 분석 보고서 PDF 다운로드 기능.
    - **보안 정책**: 병원 내 비콘(Beacon) 신호가 감지될 때만 다운로드 버튼 활성화.
    - **자동 삭제**: 다운로드된 파일은 보안을 위해 90일 후 자동 삭제됨을 안내.

### 2.3 처방약 관리 (Medication)
- **QR 코드 스캔**: 처방전의 QR 코드를 스캔하여 약물 정보 자동 입력.
- **수동 입력**: 약물명, 복용법 등을 직접 입력하여 기록.

### 2.4 프로필 (Profile)
- **정보 조회**: 이름, 이메일, 전화번호, 소속 진료과 등 확인.
- **정보 수정**: 이름, 전화번호 등 개인 정보 수정 기능.
- **로그아웃**: 안전한 세션 종료.

## 3. 기술 스택 및 아키텍처

### 3.1 기술 스택
- **Framework**: Flutter (Dart)
- **State Management**: setState (Simple), Provider (Future consideration)
- **Networking**: Dio (REST API 통신, Interceptor를 통한 토큰 관리)
- **Storage**: Flutter Secure Storage (JWT 토큰 암호화 저장), SQFlite (로컬 데이터 캐싱)
- **Hardware Integration**:
  - `flutter_blue_plus`: Bluetooth LE 스캔 (병원 비콘 감지)
  - `qr_code_scanner`: 카메라 기반 QR 코드 인식

### 3.2 보안 (Security)
- **JWT 인증**: Access/Refresh Token 기반 인증 시스템.
- **위치 기반 접근 제어**: 민감한 의료 데이터(진료 기록 원본/보고서) 다운로드는 병원 내 물리적 위치에서만 허용.
  - 웹 환경 개발 시 'Mock Mode'를 통해 테스트 가능.
- **데이터 수명 주기**: 로컬 저장된 민감 데이터는 90일 경과 시 자동 삭제 정책 적용 (앱 실행 시 체크).

## 4. 향후 개선 사항
- **실시간 알림**: Firebase Cloud Messaging (FCM) 연동을 통한 예약/복약 알림.
- **지도 연동**: Google Maps 또는 Naver Maps 연동을 통한 병원 길찾기.
- **생체 인증**: 지문/FaceID를 이용한 간편 로그인.
