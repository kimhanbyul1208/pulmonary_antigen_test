# ğŸ  ë¡œì»¬ í™˜ê²½ í…ŒìŠ¤íŠ¸ ê°€ì´ë“œ (Docker ì—†ì´)

## ğŸ“‹ ì‚¬ì „ ì¤€ë¹„

### í•„ìˆ˜ ì„¤ì¹˜ í•­ëª©
1. âœ… Python 3.10+
2. âœ… Node.js 18+
3. âœ… MySQL 8.0 (ë¡œì»¬ ì„¤ì¹˜)
4. âšª Redis (ì„ íƒì‚¬í•­ - Rate Limiting ì‚¬ìš© ì‹œ)

---

## ğŸš€ ë¹ ë¥¸ ì‹œì‘

### 1ë‹¨ê³„: ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì •

#### MySQL ì„¤ì¹˜ í™•ì¸
```bash
mysql --version
```

#### ë°ì´í„°ë² ì´ìŠ¤ ìƒì„±
```bash
mysql -u root -p
```

MySQL ì½˜ì†”ì—ì„œ:
```sql
CREATE DATABASE neuronova CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
CREATE USER 'neuronova_user'@'localhost' IDENTIFIED BY 'neuronova_password';
GRANT ALL PRIVILEGES ON neuronova.* TO 'neuronova_user'@'localhost';
FLUSH PRIVILEGES;
EXIT;
```

### 2ë‹¨ê³„: Backend ì„¤ì •

#### í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
```bash
cd backend/django_main
cp .env.local .env
```

**`.env` íŒŒì¼ ìˆ˜ì •:**
```env
MYSQL_PASSWORD=your_actual_mysql_password
```

#### Python íŒ¨í‚¤ì§€ ì„¤ì¹˜
```bash
pip install -r requirements.txt
```

#### ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹¤í–‰
```bash
python manage.py makemigrations
python manage.py migrate
```

#### ìŠˆí¼ìœ ì € ìƒì„±
```bash
python manage.py createsuperuser
```

#### ê°œë°œ ì„œë²„ ì‹¤í–‰
```bash
python manage.py runserver
```

**í™•ì¸:** http://localhost:8000/admin

### 3ë‹¨ê³„: Frontend (React) ì„¤ì •

#### íŒ¨í‚¤ì§€ ì„¤ì¹˜
```bash
cd frontend/react_web
npm install
```

#### ê°œë°œ ì„œë²„ ì‹¤í–‰
```bash
npm run dev
```

**í™•ì¸:** http://localhost:3000 (ë˜ëŠ” 5173)

### 4ë‹¨ê³„: Frontend (Flutter) ì„¤ì •

#### íŒ¨í‚¤ì§€ ì„¤ì¹˜
```bash
cd frontend/flutter_app
flutter pub get
```

#### ì•± ì‹¤í–‰
```bash
flutter run
```

---

## ğŸ§ª ê¸°ëŠ¥ë³„ í…ŒìŠ¤íŠ¸

### âœ… í…ŒìŠ¤íŠ¸ 1: Backend API í™•ì¸

#### 1.1 ì‹œìŠ¤í…œ ì²´í¬
```bash
cd backend/django_main
python manage.py check
```

**ê¸°ëŒ€ ê²°ê³¼:** `System check identified no issues (0 silenced).`

#### 1.2 Admin ì ‘ì†
1. http://localhost:8000/admin ì ‘ì†
2. ìŠˆí¼ìœ ì €ë¡œ ë¡œê·¸ì¸
3. Patients, Doctors, Predictions í™•ì¸

#### 1.3 API ì—”ë“œí¬ì¸íŠ¸ í…ŒìŠ¤íŠ¸
```bash
# ë¡œê·¸ì¸ (í† í° íšë“)
curl -X POST http://localhost:8000/api/v1/users/login/ \
  -H "Content-Type: application/json" \
  -d '{"username":"admin","password":"your_password"}'

# ì‘ë‹µì—ì„œ access í† í° ë³µì‚¬
export TOKEN="your_access_token_here"

# í†µê³„ ëŒ€ì‹œë³´ë“œ ì¡°íšŒ
curl -H "Authorization: Bearer $TOKEN" \
  http://localhost:8000/api/v1/emr/statistics/dashboard/
```

**ê¸°ëŒ€ ê²°ê³¼:**
```json
{
  "total_patients": 0,
  "total_doctors": 0,
  "total_predictions": 0,
  ...
}
```

### âœ… í…ŒìŠ¤íŠ¸ 2: React ëŒ€ì‹œë³´ë“œ

#### 2.1 ë¡œê·¸ì¸
1. http://localhost:3000 ì ‘ì†
2. ê´€ë¦¬ì ê³„ì •ìœ¼ë¡œ ë¡œê·¸ì¸

#### 2.2 ì‹œìŠ¤í…œ ëŒ€ì‹œë³´ë“œ ì ‘ì†
1. URL: http://localhost:3000/admin/system-dashboard
2. **í™•ì¸ ì‚¬í•­:**
   - [ ] ë¡œë”© ì¸ë””ì¼€ì´í„° í‘œì‹œ
   - [ ] 4ê°œì˜ ìš”ì•½ ì¹´ë“œ ë Œë”ë§
   - [ ] ì°¨íŠ¸ 2ê°œ ë Œë”ë§ (ë˜ëŠ” "ë°ì´í„° ì—†ìŒ" ë©”ì‹œì§€)

#### 2.3 ëª¨ë¸ ì„±ëŠ¥ ëŒ€ì‹œë³´ë“œ ì ‘ì†
1. URL: http://localhost:3000/admin/model-performance
2. **í™•ì¸ ì‚¬í•­:**
   - [ ] ì„±ëŠ¥ ì§€í‘œ ì¹´ë“œ ë Œë”ë§
   - [ ] ì°¨íŠ¸ ë Œë”ë§ (ë°ì´í„° ìˆì„ ì‹œ)

**ë°ì´í„°ê°€ ì—†ì„ ê²½ìš°:**
- ì •ìƒì ìœ¼ë¡œ "ë°ì´í„° ì—†ìŒ" ë˜ëŠ” 0 í‘œì‹œ
- ì—ëŸ¬ ì—†ì´ í™”ë©´ ë Œë”ë§

### âœ… í…ŒìŠ¤íŠ¸ 3: Flutter ì•±

#### 3.1 ë¡œê·¸ì¸
1. ì•± ì‹¤í–‰
2. í…ŒìŠ¤íŠ¸ ê³„ì •ìœ¼ë¡œ ë¡œê·¸ì¸

#### 3.2 ë¦¬í¬íŠ¸ ì¡°íšŒ
1. "ë¦¬í¬íŠ¸" íƒ­ ì„ íƒ
2. **í™•ì¸ ì‚¬í•­:**
   - [ ] "ì•„ì§ AI ë¶„ì„ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤" ë©”ì‹œì§€ (ë°ì´í„° ì—†ì„ ì‹œ)
   - [ ] ì—ëŸ¬ ì—†ì´ í™”ë©´ í‘œì‹œ

#### 3.3 í†µê³„ ì¡°íšŒ
1. "ê±´ê°• ìƒíƒœ í†µê³„" ì„ íƒ
2. **í™•ì¸ ì‚¬í•­:**
   - [ ] "í†µê³„ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤" ë©”ì‹œì§€ (ë°ì´í„° ì—†ì„ ì‹œ)
   - [ ] SnackBar ì—ëŸ¬ ë©”ì‹œì§€ í‘œì‹œ (API ì‹¤íŒ¨ ì‹œ)

---

## ğŸ¯ í…ŒìŠ¤íŠ¸ ë°ì´í„° ìƒì„± (ì„ íƒì‚¬í•­)

### Python Shell ì‚¬ìš©

```bash
cd backend/django_main
python manage.py shell
```

```python
from django.contrib.auth.models import User
from apps.emr.models import Patient
from apps.custom.models import Doctor, PatientPredictionResult
from apps.emr.models import Encounter
from datetime import datetime, timedelta

# 1. ì˜ì‚¬ ìƒì„±
doctor_user = User.objects.create_user(
    username='doctor1',
    password='test1234',
    first_name='ê¹€',
    last_name='ì˜ì‚¬'
)
doctor = Doctor.objects.create(
    user=doctor_user,
    license_number='DOC001',
    specialty='Neurosurgery',
    department='ì‹ ê²½ì™¸ê³¼'
)

# 2. í™˜ì ìƒì„±
patient_user = User.objects.create_user(
    username='patient1',
    password='test1234',
    first_name='í™',
    last_name='ê¸¸ë™'
)
patient = Patient.objects.create(
    user=patient_user,
    pid='P001',
    birth_date='1990-01-01',
    sex='M',
    full_name='í™ê¸¸ë™',
    phone='010-1234-5678'
)

# 3. Encounter ìƒì„±
encounter = Encounter.objects.create(
    patient=patient,
    encounter_date=datetime.now(),
    reason='ì •ê¸°ê²€ì§„',
    provider_id=doctor.user_id
)

# 4. ì˜ˆì¸¡ ê²°ê³¼ ìƒì„± (í…ŒìŠ¤íŠ¸ìš©)
for i in range(6):
    date = datetime.now() - timedelta(days=30 * i)
    confidence = 0.6 + (i * 0.05)

    PatientPredictionResult.objects.create(
        encounter=encounter,
        patient=patient,
        doctor=doctor,
        model_name='Brain Tumor Classification (CT)',
        model_version='1.0',
        prediction_class='Glioblastoma',
        confidence_score=confidence,
        probabilities={
            'Glioblastoma': confidence,
            'Meningioma': 0.2,
            'Pituitary': 0.1
        },
        created_at=date
    )

print("í…ŒìŠ¤íŠ¸ ë°ì´í„° ìƒì„± ì™„ë£Œ!")
```

### ë°ì´í„° ìƒì„± í›„ í™•ì¸

```bash
# í†µê³„ API ë‹¤ì‹œ í˜¸ì¶œ
curl -H "Authorization: Bearer $TOKEN" \
  http://localhost:8000/api/v1/emr/statistics/dashboard/
```

**ê¸°ëŒ€ ê²°ê³¼:**
```json
{
  "total_patients": 1,
  "total_doctors": 1,
  "total_predictions": 6,
  ...
}
```

---

## ğŸ› ë¬¸ì œ í•´ê²°

### ë¬¸ì œ 1: MySQL ì—°ê²° ì˜¤ë¥˜
```
django.db.utils.OperationalError: (2003, "Can't connect to MySQL server")
```

**í•´ê²°:**
1. MySQL ì„œë¹„ìŠ¤ ì‹¤í–‰ í™•ì¸
   ```bash
   # Windows
   services.msc â†’ MySQL ì„œë¹„ìŠ¤ í™•ì¸

   # Mac/Linux
   sudo service mysql status
   ```

2. `.env` íŒŒì¼ì˜ MYSQL_PASSWORD í™•ì¸
3. ë°ì´í„°ë² ì´ìŠ¤ê°€ ìƒì„±ë˜ì—ˆëŠ”ì§€ í™•ì¸
   ```bash
   mysql -u root -p -e "SHOW DATABASES;"
   ```

### ë¬¸ì œ 2: ë§ˆì´ê·¸ë ˆì´ì…˜ ì˜¤ë¥˜
```
No changes detected
```

**í•´ê²°:**
```bash
python manage.py makemigrations apps.emr apps.custom apps.core
python manage.py migrate
```

### ë¬¸ì œ 3: CORS ì˜¤ë¥˜ (React)
```
Access to XMLHttpRequest blocked by CORS policy
```

**í•´ê²°:**
`.env` íŒŒì¼ í™•ì¸:
```env
CORS_ALLOWED_ORIGINS=http://localhost:3000,http://localhost:5173
```

### ë¬¸ì œ 4: Import ì˜¤ë¥˜
```
ModuleNotFoundError: No module named 'xxx'
```

**í•´ê²°:**
```bash
pip install -r requirements.txt
```

### ë¬¸ì œ 5: Flutter ë¹Œë“œ ì˜¤ë¥˜
```
Packages not found
```

**í•´ê²°:**
```bash
flutter pub get
flutter clean
flutter pub get
```

---

## ğŸ“Š ì½”ë“œ ê²€ì¦ (ì´ë¯¸ ì™„ë£Œ)

### âœ… ì™„ë£Œëœ ê²€ì¦ í•­ëª©
- [x] Django system check: í†µê³¼
- [x] StatisticsViewSet import: ì„±ê³µ
- [x] Security Middleware import: ì„±ê³µ
- [x] Python êµ¬ë¬¸ ì²´í¬: í†µê³¼
- [x] React ì»´í¬ë„ŒíŠ¸ êµ¬ì¡°: ì •ìƒ
- [x] Flutter íƒ€ì… ì•ˆì •ì„±: í™•ë³´

---

## ğŸ¯ ìµœì†Œ í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤

### ì‹œë‚˜ë¦¬ì˜¤ 1: ì½”ë“œë§Œ ê²€ì¦ (DB ì—†ì´)
```bash
# Backend
cd backend/django_main
python manage.py check

# Import í…ŒìŠ¤íŠ¸
python manage.py shell -c "from apps.emr.views.statistics_views import StatisticsViewSet; print('OK')"
```

### ì‹œë‚˜ë¦¬ì˜¤ 2: ì „ì²´ ì‹œìŠ¤í…œ í…ŒìŠ¤íŠ¸ (DB í¬í•¨)
1. MySQL ì„¤ì •
2. ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹¤í–‰
3. ìŠˆí¼ìœ ì € ìƒì„±
4. Django ì„œë²„ ì‹¤í–‰
5. React ì•± ì‹¤í–‰
6. ë¸Œë¼ìš°ì €ì—ì„œ í™•ì¸

### ì‹œë‚˜ë¦¬ì˜¤ 3: APIë§Œ í…ŒìŠ¤íŠ¸
```bash
# ì„œë²„ ì‹¤í–‰
python manage.py runserver

# ë‹¤ë¥¸ í„°ë¯¸ë„ì—ì„œ
curl http://localhost:8000/api/v1/emr/statistics/dashboard/
```

---

## ğŸ“ ì²´í¬ë¦¬ìŠ¤íŠ¸

### Backend
- [ ] MySQL ì„¤ì¹˜ ë° ì‹¤í–‰
- [ ] ë°ì´í„°ë² ì´ìŠ¤ ìƒì„±
- [ ] `.env` íŒŒì¼ ì„¤ì •
- [ ] pip install ì™„ë£Œ
- [ ] ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹¤í–‰
- [ ] ìŠˆí¼ìœ ì € ìƒì„±
- [ ] runserver ì‹¤í–‰
- [ ] Admin ì ‘ì† í™•ì¸

### React
- [ ] npm install ì™„ë£Œ
- [ ] npm run dev ì‹¤í–‰
- [ ] localhost:3000 ì ‘ì†
- [ ] ë¡œê·¸ì¸ í™•ì¸
- [ ] ëŒ€ì‹œë³´ë“œ ì ‘ì† í™•ì¸

### Flutter
- [ ] flutter pub get ì™„ë£Œ
- [ ] flutter run ì‹¤í–‰
- [ ] ì•± ë¡œê·¸ì¸ í™•ì¸
- [ ] API í†µì‹  í™•ì¸

---

## ğŸ“ ê¶Œì¥ ê°œë°œ ìˆœì„œ

1. **Backend ë¨¼ì € ì„¤ì •**
   - MySQL ì„¤ì •
   - Django ì„œë²„ ì‹¤í–‰
   - Adminì—ì„œ ë°ì´í„° í™•ì¸

2. **API í…ŒìŠ¤íŠ¸**
   - curl ë˜ëŠ” Postmanìœ¼ë¡œ í…ŒìŠ¤íŠ¸
   - ì‘ë‹µ í™•ì¸

3. **Frontend ì—°ê²°**
   - React ì•± ì‹¤í–‰
   - API í†µì‹  í™•ì¸
   - UI í™•ì¸

4. **Flutter ì•± í…ŒìŠ¤íŠ¸**
   - ì•± ì‹¤í–‰
   - ì „ì²´ flow í…ŒìŠ¤íŠ¸

---

## ğŸ’¡ ê°œë°œ íŒ

### 1. Backend ë¹ ë¥¸ ì¬ì‹œì‘
```bash
# Ctrl+Cë¡œ ì„œë²„ ì¤‘ì§€ í›„
python manage.py runserver
```

### 2. React Hot Reload
- íŒŒì¼ ì €ì¥ ì‹œ ìë™ ìƒˆë¡œê³ ì¹¨
- ë³„ë„ ì¬ì‹œì‘ ë¶ˆí•„ìš”

### 3. Flutter Hot Reload
- ì•± ì‹¤í–‰ ì¤‘ `r` ì…ë ¥: Hot Reload
- `R` ì…ë ¥: Hot Restart

### 4. ë¡œê·¸ í™•ì¸
```bash
# Django
tail -f logs/neuronova.log

# React
ë¸Œë¼ìš°ì € ê°œë°œì ë„êµ¬ Console íƒ­

# Flutter
flutter logs
```

---

**ì‘ì„±ì¼:** 2025-12-08
**ì‘ì„±ì:** Claude Code (Sonnet 4.5)
**ëª©ì :** Docker ì—†ì´ ë¡œì»¬ í™˜ê²½ì—ì„œ ê°œë°œ ë° í…ŒìŠ¤íŠ¸
